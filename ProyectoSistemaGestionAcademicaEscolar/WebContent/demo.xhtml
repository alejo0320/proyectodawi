<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	xmlns:f="http://java.sun.com/jsf/core">

<h:head>
<title>I.E.P &quot;SAN CARLOS&quot;</title>
<h:outputStylesheet library="css" name="misEstilosLogin.css" target="head"/>
<script type="text/javascript">  
    function onEditComplete(xhr, status, args) {
        if(args.validationFailed) {
			$(PrimeFaces.escapeClientId('form:listaalumnos')).parent().effect("shake", { times:5 }, 100);
		} else {
			carDialog.hide();
		}
    } 
</script>
</h:head>
<h:body style="background-color: #A8C2D3;">
<h1 align="center">I.E.P &quot;SAN CARLOS&quot;</h1>
 <p:growl id="msgs" showDetail="true" sticky="false" life="10000"/>
<h:form id="form"> 
    <p:dataTable id="listaalumnos" var="alumno" value="#{alumnoBean.alumnos}">  
  
  		<p:column headerText="Codigo">  
            <h:outputText value="#{alumno.strCodigoAlumno}" />  
        </p:column>
        
        <p:column headerText="Nombres">  
            <h:outputText value="#{alumno.strNombres}" />  
        </p:column>  
  
        <p:column headerText="Apellido Paterno">  
            <h:outputText value="#{alumno.strApellidoPaterno}" />  
        </p:column> 
        
        <p:column headerText="Apellido Materno">  
            <h:outputText value="#{alumno.strApellidoMaterno}" />  
        </p:column>  
        
        <p:column headerText="Grado">  
            <h:outputText value="#{alumno.intGrado}" />  
        </p:column>  

        <p:column style="width:100px">  
             <h:panelGrid columns="3" styleClass="actions" cellpadding="2">  
                 <p:commandButton update="dlgForm:display" oncomplete="carDialog.show()" image="ui-icon ui-icon-search" title="Ver Detalle">  
                     <f:setPropertyActionListener value="#{alumno}" target="#{alumnoBean.selectedAlumno}" />  
                     <f:setPropertyActionListener value="#{false}" target="#{alumnoBean.editMode}" />  
                 </p:commandButton>  
                 <p:commandButton update="dlgForm:display" oncomplete="carDialog.show()" image="ui-icon ui-icon-pencil" title="Editar">  
                     <f:setPropertyActionListener value="#{alumno}" target="#{alumnoBean.selectedAlumno}" />  
                     <f:setPropertyActionListener value="#{true}" target="#{alumnoBean.editMode}" />  
                 </p:commandButton>  
                 <p:commandButton update="dlgForm:display" oncomplete="confirmation.show()" image="ui-icon ui-icon-close" title="Inhabilitar">  
                     <f:setPropertyActionListener value="#{alumno}" target="#{alumnoBean.selectedAlumno}" />  
                 </p:commandButton>  
             </h:panelGrid>  
        </p:column>
    </p:dataTable>  
        <p:confirmDialog message="Estas seguro?" width="350" height="200" 
                    showEffect="explode" hideEffect="explode"  
                    header="Confirm" severity="alert" widgetVar="confirmation" position="center">  
  
        <p:commandButton  type="submit" value="Si, asi es"  action="#{alumnoBean.inhabilitarAlumno}"  update=":form:listaalumnos" oncomplete="confirmation.hide()" ajax="false">
        </p:commandButton>  
        <p:commandButton value="No aun" onclick="confirmation.hide()" type="button" />  
  
    </p:confirmDialog>
  
</h:form> 
                
<p:dialog header="Detalle Alumno" widgetVar="carDialog" resizable="false" id="carDlg"  
                showEffect="fade" hideEffect="explode" modal="true" width="400" position="center">  
<h:form id="dlgForm">  
          <h:panelGrid id="display" columns="2" cellpadding="2" style="margin:0 auto;" >  
  
            <h:outputText value="Codigo Alumno" />  
            <h:panelGroup>  
                <h:outputText value="#{alumnoBean.selectedAlumno.strCodigoAlumno}" style="font-weight:bold" rendered="#{!alumnoBean.editMode}"/>  
                <p:inputText value="#{alumnoBean.selectedAlumno.strCodigoAlumno}" rendered="#{alumnoBean.editMode}" required="true" label="Codigo Alumno"/>  
            </h:panelGroup>  
  
            <h:outputText value="Codigo Apoderado" />  
            <h:panelGroup>  
                <h:outputText value="#{alumnoBean.selectedAlumno.apoderados.personas.strCodigoPersona}" style="font-weight:bold" rendered="#{!alumnoBean.editMode}"/>  
                <p:inputText id="codigoApoderadoAl" value="#{alumnoBean.selectedAlumno.apoderados.personas.strCodigoPersona}" rendered="#{alumnoBean.editMode}" required="true" label="Codigo Apoderado"/>  
            </h:panelGroup>  
  
  			<h:outputText value="Nombres" />  
            <h:panelGroup>  
                <h:outputText value="#{alumnoBean.selectedAlumno.strNombres}" style="font-weight:bold" rendered="#{!alumnoBean.editMode}"/>  
                <p:inputText id="NombresAl" value="#{alumnoBean.selectedAlumno.strNombres}" rendered="#{alumnoBean.editMode}" required="true" label="Nombre"/>  
            </h:panelGroup>  
            
            <h:outputText value="Apellido Paterno" />  
            <h:panelGroup>  
                <h:outputText value="#{alumnoBean.selectedAlumno.strApellidoPaterno}" style="font-weight:bold" rendered="#{!alumnoBean.editMode}"/>  
                <p:inputText id="apellidoPaternoAl" value="#{alumnoBean.selectedAlumno.strApellidoPaterno}" rendered="#{alumnoBean.editMode}" required="true" label="Apellido Paterno"/>  
            </h:panelGroup>  
            
            <h:outputText value="Apellido Materno" />  
            <h:panelGroup>  
                <h:outputText value="#{alumnoBean.selectedAlumno.strApellidoMaterno}" style="font-weight:bold" rendered="#{!alumnoBean.editMode}"/>  
                <p:inputText id="apellidoMaternoAl" value="#{alumnoBean.selectedAlumno.strApellidoMaterno}" rendered="#{alumnoBean.editMode}" required="true" label="Apellido Materno"/>  
            </h:panelGroup>  
            
            <h:outputText value="Fecha Nacimiento" />  
            <h:panelGroup>  
                <h:outputText value="#{alumnoBean.selectedAlumno.dtFecNac}" style="font-weight:bold" rendered="#{!alumnoBean.editMode}"/>  
                <p:inputText id="fecNacAl" value="#{alumnoBean.selectedAlumno.dtFecNac}" rendered="#{alumnoBean.editMode}" required="true" label="Fecha Nacimiento"/>  
            </h:panelGroup>
            
            <h:outputText value="Grado" />  
            <h:panelGroup>  
                <h:outputText value="#{alumnoBean.selectedAlumno.intGrado}" style="font-weight:bold" rendered="#{!alumnoBean.editMode}"/>  
                <p:inputText id="gradoAl" value="#{alumnoBean.selectedAlumno.intGrado}" rendered="#{alumnoBean.editMode}" required="true" label="Grado"/>  
            </h:panelGroup>
            
            <h:outputText value="Seccion" />  
            <h:panelGroup>  
                <h:outputText value="#{alumnoBean.selectedAlumno.strSeccion}" style="font-weight:bold" rendered="#{!alumnoBean.editMode}"/>  
                <p:inputText id="seccionAl" value="#{alumnoBean.selectedAlumno.strSeccion}" rendered="#{alumnoBean.editMode}" required="true" label="Seccion"/>  
            </h:panelGroup>
            
            <h:outputText value="Anio Academico" />  
            <h:panelGroup>  
                <h:outputText value="#{alumnoBean.selectedAlumno.strAnioAcademico}" style="font-weight:bold" rendered="#{!alumnoBean.editMode}"/>  
                <p:inputText id="anioAcademicoAl" value="#{alumnoBean.selectedAlumno.strAnioAcademico}" rendered="#{alumnoBean.editMode}" required="true" label="Anio Academico"/>  
            </h:panelGroup>
  
  			<h:outputText value="Estado" />  
            <h:panelGroup >  
                <h:outputText value="#{alumnoBean.selectedAlumno.strEstado}" style="font-weight:bold" rendered="#{!alumnoBean.editMode}"/>  
                <p:inputText id="estadoAl" value="#{alumnoBean.selectedAlumno.strEstado}" rendered="#{alumnoBean.editMode}" required="true" label="Estado"/>  
            </h:panelGroup>
  
          <f:facet name="footer"> 
                <p:outputPanel rendered="#{alumnoBean.editMode}" layout="block" style="text-align:center">
                <h:panelGroup>
					  <p:commandButton value="Grabar" 
					  actionListener="#{alumnoBean.actualizaAlumno}"  
					  update="form:listaalumnos msgs" 
                      oncomplete="onEditComplete(xhr,status,args)" 
                      image="ui-icon ui-icon-check"/>
                    <p:commandButton value="Cancelar" onclick="carDialog.hide()" type="button" image="ui-icon ui-icon-close"/>
  				</h:panelGroup>
              </p:outputPanel>  
          </f:facet>  
        </h:panelGrid> 
       </h:form>
    </p:dialog>  
</h:body>
</html>