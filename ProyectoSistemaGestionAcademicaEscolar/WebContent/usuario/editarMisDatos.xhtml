<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/templates/crud-template.xhtml">

<ui:define name="content">
<div align="center" style="width: 800px;">
<p:growl id="msgs" showDetail="true" sticky="false" life="5000"/>
<h:form id="form" style="width: 250px;">
<p:panel header="Mi Información Personal">
<h:panelGrid columns="2">
	<h:outputLabel value="Información Personal" style="font-weight:bold;color:#026890;"/>
	<h:panelGroup>
		<p:commandButton update="dlgForm:display"
						 image="ui-icon ui-icon-search"
                         title="Ver Detalle Información"
                         oncomplete="carDialog.show()"
                         actionListener="#{editarDatosUsuarioBean.cargaDatos}"> 
                 <f:setPropertyActionListener value="#{false}" target="#{editarDatosUsuarioBean.editMode}" /> 
        </p:commandButton>
  	 </h:panelGroup>
  	   <h:outputLabel value="Actulizar Mis Datos" style="font-weight:bold;color:#026890;"/>
  	 <h:panelGroup>
			<p:commandButton  update="dlgForm:display"
			                  image="ui-icon ui-icon-search"
                      		  title="Actualizar Información"
                              oncomplete="carDialog.show()"
                              actionListener="#{editarDatosUsuarioBean.cargaDatos}">
                 <f:setPropertyActionListener value="#{true}" target="#{editarDatosUsuarioBean.editMode}" />     
            </p:commandButton>
           
  	 </h:panelGroup> 
  	 <h:outputLabel value="Cambiar Contraseña" style="font-weight:bold;color:#026890;"/>
  	  <h:panelGroup>
			<p:commandButton update="dlgForm2:display2"
							 image="ui-icon ui-icon-search"
							 oncomplete="carDialog2.show()"
                             title="Actualizar Contraseña"/>
           
  	 </h:panelGroup> 

</h:panelGrid>
</p:panel>
</h:form>
<p:dialog header="Información Personal" widgetVar="carDialog" resizable="false" id="carDlg"  
                showEffect="fade" hideEffect="explode" modal="true" width="400" position="center">  
<h:form id="dlgForm">  
          <h:panelGrid id="display" columns="2" cellpadding="2" style="margin:0 auto;" >  
  
            <h:outputText value="Codigo Empleado"/>  
            <h:panelGroup>  
                <h:outputText value="#{editarDatosUsuarioBean.usuario.personas.strCodigoPersona}" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>
                <h:outputText value="#{editarDatosUsuarioBean.usuario.personas.strCodigoPersona}" style="font-weight:bold" rendered="#{editarDatosUsuarioBean.editMode}"/>    
            </h:panelGroup>   
  
  			<h:outputText value="Nombres" />  
            <h:panelGroup>  
                <h:outputText value="#{editarDatosUsuarioBean.usuario.personas.strNombre}" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>  
                <p:inputText value="#{editarDatosUsuarioBean.usuario.personas.strNombre}" style="font-weight:bold" rendered="#{editarDatosUsuarioBean.editMode}" required="true" label="Nombre" onkeypress="return validar(event)"/>  
            </h:panelGroup>  
            
            <h:outputText value="Apellido Paterno" />  
            <h:panelGroup>  
                <h:outputText value="#{editarDatosUsuarioBean.usuario.personas.strApellidoPaterno}" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>  
                <p:inputText value="#{editarDatosUsuarioBean.usuario.personas.strApellidoPaterno}" style="font-weight:bold" rendered="#{editarDatosUsuarioBean.editMode}" required="true" label="Apellido Paterno" onkeypress="return validar(event)"/>  
            </h:panelGroup>  
            
            <h:outputText value="Apellido Materno" />  
            <h:panelGroup>  
                <h:outputText value="#{editarDatosUsuarioBean.usuario.personas.strApellidoMaterno}" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>  
                <p:inputText value="#{editarDatosUsuarioBean.usuario.personas.strApellidoMaterno}" style="font-weight:bold" rendered="#{editarDatosUsuarioBean.editMode}" required="true" label="Apellido Materno" onkeypress="return validar(event)"/>  
            </h:panelGroup>
            
            <h:outputText value="DNI" />  
            <h:panelGroup>  
                <h:outputText value="#{editarDatosUsuarioBean.usuario.personas.intDNI}" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>  
                <p:inputMask value="#{editarDatosUsuarioBean.usuario.personas.intDNI}" style="font-weight:bold" rendered="#{editarDatosUsuarioBean.editMode}" required="true" mask="99999999" label="DNI"/>  
            </h:panelGroup> 
            
            <h:outputText value="Distrito" />  
            <h:panelGroup>  
                <h:outputText value="#{editarDatosUsuarioBean.usuario.personas.distritos.strNombreDistrito}" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>  
                <h:selectOneMenu value="#{editarDatosUsuarioBean.usuario.personas.distritos.intIdDistrito}" style="font-weight:bold" rendered="#{editarDatosUsuarioBean.editMode}"  required="true"  >  
		            <f:selectItems itemLabel="Seleccione Distrito" itemValue="#{null}"/>
		            <f:selectItems value="#{empleadoBean.distritos}" var="distrito" 
		                          itemLabel="#{distrito.strNombreDistrito}" itemValue="#{distrito.intIdDistrito}" />  	        
		        </h:selectOneMenu>   
            </h:panelGroup>  
            
            <h:outputText value="Dirección" />  
            <h:panelGroup>  
                <h:outputText value="#{editarDatosUsuarioBean.usuario.personas.strDireccion}" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>  
                <p:inputText value="#{editarDatosUsuarioBean.usuario.personas.strDireccion}" style="font-weight:bold" rendered="#{editarDatosUsuarioBean.editMode}" required="true" label="Dirección"/>  
            </h:panelGroup> 
            
            <h:outputText value="Email" />  
            <h:panelGroup>  
                <h:outputText value="#{editarDatosUsuarioBean.usuario.personas.strMail}" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>  
                <p:inputText value="#{editarDatosUsuarioBean.usuario.personas.strMail}" style="font-weight:bold" rendered="#{editarDatosUsuarioBean.editMode}" required="true" label="Email" validator="#{validators.validateEmail}"/>  
            </h:panelGroup> 
            
            <h:outputText value="Teléfono" />  
            <h:panelGroup>  
                <h:outputText value="#{editarDatosUsuarioBean.usuario.personas.strTelefono}" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>  
                <p:inputMask value="#{editarDatosUsuarioBean.usuario.personas.strTelefono}" style="font-weight:bold" rendered="#{editarDatosUsuarioBean.editMode}" mask="999-9999" required="true" label="Telefono"/>  
            </h:panelGroup> 
            
            <h:outputText value="Celular" />  
            <h:panelGroup>  
                <h:outputText value="#{editarDatosUsuarioBean.usuario.personas.strCelular}" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>  
                <p:inputText value="#{editarDatosUsuarioBean.usuario.personas.strCelular}" style="font-weight:bold" rendered="#{editarDatosUsuarioBean.editMode}" mask="999999999" required="true" label="Celular"/>  
            </h:panelGroup> 
            
            <h:outputText value="Sexo" />  
            <h:panelGroup> 
            <c:if test="#{editarDatosUsuarioBean.usuario.personas.strSexo==1}">
	  		  <h:outputText value="Masculino" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>  
	  	    </c:if> 
	  	    <c:if test="#{editarDatosUsuarioBean.usuario.personas.strSexo==0}">
	  		  <h:outputText value="Femenino" style="font-weight:bold" rendered="#{!editarDatosUsuarioBean.editMode}"/>  
	  	    </c:if> 
	  	     <h:selectOneMenu value="#{editarDatosUsuarioBean.usuario.personas.strSexo}" style="font-weight:bold" rendered="#{editarDatosUsuarioBean.editMode}"  required="true"  label="Sexo">  
		            <f:selectItem itemLabel="Seleccione Sexo" itemValue="#{null}"/>
		            <f:selectItem itemLabel="Femenino" itemValue="0" />  
		            <f:selectItem itemLabel="Masculino" itemValue="1" />          
		     </h:selectOneMenu>  
            </h:panelGroup> 
            
            <h:outputText value="Foto" rendered="#{!editarDatosUsuarioBean.editMode}"/>
            <p:fileUpload sizeLimit="1048576" 
           auto="true" widgetVar="uploader" label="Cargar Foto"
           fileUploadListener="#{editarDatosUsuarioBean.cargarImagenActualiza}"
           allowTypes="*.jpg;*.png;*.gif;" description="Images" 
           update="msgs,dlgForm:imgFotoActualiza" multiple="false" customUI="true" required="true"
           rendered="#{editarDatosUsuarioBean.editMode}"/>
			<h:panelGroup >  
            <p:graphicImage id="imgFotoActualiza"  value="#{editarDatosUsuarioBean.usuario.personas.scImagen}" cache="false"
              style="height:50%;width:50%"/>
  		    </h:panelGroup> 
          <f:facet name="footer"> 
                <p:outputPanel rendered="#{editarDatosUsuarioBean.editMode}" layout="block" style="text-align:center">
                <h:panelGroup>
					  <p:commandButton value="Grabar" 
					  actionListener="#{editarDatosUsuarioBean.actualizaDatos}"  
					  update="msgs" 
                      image="ui-icon ui-icon-check"
                      oncomplete="onEditComplete(args)"/>
                    <p:commandButton value="Cancelar" onclick="carDialog.hide()" type="button" image="ui-icon ui-icon-close"/>
  				</h:panelGroup>
              </p:outputPanel>  
          </f:facet>  
        </h:panelGrid> 
       </h:form>
  </p:dialog>  
  
<p:dialog header="Cambio de Contraseña" widgetVar="carDialog2" resizable="false" id="carDlg2"  
                showEffect="fade" hideEffect="explode" modal="true" width="400" position="center"
                onShow="limpiarTextBox('#dlgForm2')">  
<h:form id="dlgForm2">  
          <h:panelGrid id="display2" columns="2" cellpadding="2" style="margin:0 auto;" > 
           
            <h:outputLabel value="Contraseña Anterior:" />  
            <p:password value="pwd" feedback="false" label="Contraseña Anterior" required="true" validator="#{validators.validaContrasenaAntigua}"/> 
            
  			 <h:outputLabel  value="Nueva Contraseña:" />
        	 <p:password id="password" binding="#{password}" feedback="false" value="#{editarDatosUsuarioBean.password}" required="true" label="Nueva Contraseña"/>
 

        	<h:outputLabel value="Confirmacion" />
        		<p:password id="confirm" required="true" feedback="false" label="Confirmación Contraseña">
            		<f:validator validatorId="passwordValidator" />
           		 	<f:attribute name="password" value="#{password.value}" />
        	</p:password>

          <f:facet name="footer"> 
                <p:outputPanel rendered="true" layout="block" style="text-align:center">
                <h:panelGroup>
					  <p:commandButton value="Cambiar" 
					  actionListener="#{editarDatosUsuarioBean.cambiaContrasena}"  
					  update="dlgForm2:display2 msgs" 
                      image="ui-icon ui-icon-check"
                      oncomplete="onEditCompleteActualizarContrasena(args)"/>
                    <p:commandButton value="Cancelar" onclick="carDialog2.hide()" type="button" image="ui-icon ui-icon-close"/>
  				</h:panelGroup>
              </p:outputPanel>  
          </f:facet>  
        </h:panelGrid> 
       </h:form>
  </p:dialog> 
</div>
</ui:define>
</ui:composition>
