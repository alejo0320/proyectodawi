<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/templates/crud-template.xhtml">

	<ui:define name="title">
		I.E.P &quot;SAN CARLOS&quot;
	</ui:define>
	
	<ui:define name="header">
		<ui:include src="/snippets/header.xhtml" />
	</ui:define>

	<ui:define name="menu">
		<ui:include src="/snippets/menu.xhtml" />
	</ui:define>

	<ui:define name="body">
	<div align="center">
		 <p:growl id="msgs" showDetail="true" sticky="false" life="10000"/>
<h:form id="form" style="width: 800px;"> 
    <p:dataTable id="listaAsignaturas" var="asignatura" value="#{asignaturaBean.asignaturas}" 
    widgetVar="asignaturasTable" emptyMessage="No hay asignaturas a listar" 
    paginator="true" rows="5"  
    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
    rowsPerPageTemplate="5,10,15">  
  		<f:facet name="header">  
  		<div align="right">
            <p:outputPanel>  
                <h:outputText value="Busqueda:" />
                <p:inputText id="globalFilter" onkeyup="asignaturasTable.filter()" style="width:150px" />  
            </p:outputPanel>  
        </div>
        </f:facet>
        
  		<p:column headerText="Codigo">  
            <h:outputText value="#{asignatura.intCodigoAsignatura}"/>  
        </p:column>
        
        <p:column headerText="Descripcion" filterBy="#{asignatura.strNombreAsignatura}" filterStyle="display:none">  
            <h:outputText value="#{asignatura.strNombreAsignatura}" />  
        </p:column>  
        
        <p:column style="width:100px">  
             <h:panelGrid columns="3" styleClass="actions" cellpadding="2">  
                 <p:commandButton update="dlgForm:display" oncomplete="carDialog.show()" image="ui-icon ui-icon-search" title="Vea el Detalle de la Asignatura">  
                     <f:setPropertyActionListener value="#{asignatura}" target="#{asignaturaBean.selectedAsignatura}" />  
                     <f:setPropertyActionListener value="#{false}" target="#{asignaturaBean.editMode}" />  
                 </p:commandButton>  
                 <p:commandButton update="dlgForm:display" oncomplete="carDialog.show()" image="ui-icon ui-icon-pencil" title="Edite los Datos de la Asignatura">  
                     <f:setPropertyActionListener value="#{asignatura}" target="#{asignaturaBean.selectedAsignatura}" />  
                     <f:setPropertyActionListener value="#{true}" target="#{asignaturaBean.editMode}" />  
                 </p:commandButton>  
                 <p:commandButton update="dlgForm:display" oncomplete="confirmation.show()" image="ui-icon ui-icon-close" title="Deshabilite la Asignatura">  
                     <f:setPropertyActionListener value="#{asignatura}" target="#{asignaturaBean.selectedAsignatura}" />  
                 </p:commandButton>  
             </h:panelGrid>  
        </p:column>
        <f:facet name="footer">  
         <div align="left">
         <p:commandButton value="Nueva Asignatura" update="dlgForm2:display2" oncomplete="carDialog2.show()"  image="ui-icon ui-icon-person" title="Agregue una Asignatura adicional">  
				<f:setPropertyActionListener value="#{true}" target="#{asignaturaBean.editMode}" />  
 		 </p:commandButton>
         </div>
        </f:facet> 
    </p:dataTable>  
        <p:confirmDialog message="Estas seguro?" width="350" height="200" 
                    showEffect="explode" hideEffect="explode"  
                    header="Confirm" severity="alert" widgetVar="confirmation" position="center">  
  
        <p:commandButton  type="submit" value="Si"  action="#{asignaturaBean.inhabilitaAsignatura}"  update=":form:listaalumnos" oncomplete="confirmation.hide()" ajax="false">
        </p:commandButton>  
        <p:commandButton value="No" onclick="confirmation.hide()" type="button" />  
  
    </p:confirmDialog>
  
</h:form> 
                
<p:dialog header="Detalle Asignatura" widgetVar="carDialog" resizable="false" id="carDlg"  
                showEffect="fade" hideEffect="explode" modal="true" width="400" position="center">  
<h:form id="dlgForm">  
          <h:panelGrid id="display" columns="2" cellpadding="2" style="margin:0 auto;" >  
  
            <h:outputText value="Codigo Asignatura" />  
            <h:panelGroup>  
                <h:outputText value="#{asignaturaBean.selectedAsignatura.intCodigoAsignatura}" style="font-weight:bold" rendered="#{!asignaturaBean.editMode}"/>  
                <h:outputText value="#{asignaturaBean.selectedAsignatura.intCodigoAsignatura}" style="font-weight:bold" rendered="#{asignaturaBean.editMode}" />  
            </h:panelGroup>  
  
            <h:outputText value="Nombre Asignatura" />  
            <h:panelGroup>  
                <h:outputText value="#{asignaturaBean.selectedAsignatura.strNombreAsignatura}" style="font-weight:bold" rendered="#{!asignaturaBean.editMode}"/>  
                <p:inputText value="#{asignaturaBean.selectedAsignatura.strNombreAsignatura}" style="font-weight:bold" rendered="#{asignaturaBean.editMode}" required="true" label="Nombre Asignatura"/>  
            </h:panelGroup>  
  
          <f:facet name="footer"> 
                <p:outputPanel rendered="#{asignaturaBean.editMode}" layout="block" style="text-align:center">
                <h:panelGroup>
					  <p:commandButton value="Grabar" 
					  actionListener="#{asignaturaBean.actualizaAsignatura}"  
					  update="form:listaAsignaturas msgs" 
                      image="ui-icon ui-icon-check"
                      oncomplete="onEditComplete(args)"/>
                    <p:commandButton value="Cancelar" onclick="carDialog.hide()" type="button" image="ui-icon ui-icon-close"/>
  				</h:panelGroup>
              </p:outputPanel>  
          </f:facet>  
        </h:panelGrid> 
       </h:form>
    </p:dialog>  
    
    
    <p:dialog header="Nuevo Asignatura" widgetVar="carDialog2" resizable="false" id="carDlg2"  
                showEffect="fade" hideEffect="explode" modal="true" width="400" position="center">  
	   <h:form id="dlgForm2">  
          <h:panelGrid id="display2" columns="2" cellpadding="2" style="margin:0 auto;" >  
            
            <h:outputText value="Nombre Asignatura" />  
            <h:panelGroup>  
                <p:inputText value="#{asignaturaBean.nuevaAsignatura.strNombreAsignatura}" style="font-weight:bold" required="true" label="Nombre Asignatura"/>  
            </h:panelGroup> 
            
          <f:facet name="footer"> 
                <p:outputPanel rendered="true" layout="block" style="text-align:center">
                <h:panelGroup>
					  <p:commandButton value="Grabar" 
					  actionListener="#{asignaturaBean.registraAsignatura}"  
					  update="form:listaAsignaturas msgs" 
                      image="ui-icon ui-icon-check"
                      oncomplete="onEditCompleteRegistrar(args)"/>
                    <p:commandButton value="Cancelar" onclick="carDialog2.hide()" type="button" image="ui-icon ui-icon-close"/>
  				</h:panelGroup>
              </p:outputPanel>  
          </f:facet>  
          
        </h:panelGrid> 
       </h:form>
    </p:dialog>
	</div>
	</ui:define>

	<ui:define name="footer">
		<ui:include src="/snippets/footer.xhtml" />
	</ui:define>
</ui:composition>